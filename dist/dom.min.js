const DOM={el:function(e="div",t={}){let n=document.createElement(e);return DOM.apply(n,t)},apply:function(e,t={}){for(let n in t)e.setAttribute(n,t[n]);return e},empty:function(e){for(;e.childNodes.length;)e.firstChild.remove();return e},expand:function(e,t){for(let[n,o]of e.matchAll(/\{\{(.+?)\}\}/g))if(t.hasOwnProperty(o))for(;e.indexOf(n)>-1;)e=e.replace(n,t[o]);return e},debounce:function(e,t=300){let n;return()=>{n&&clearTimeout(n),n=setTimeout(e,t)}},Animator:function(e=60){let t,n={},o=e,r=numFrames=0;let c=0;return window.requestAnimationFrame((function e(o){let i;t&&(i=o-t,r+=i,numFrames++,o>c&&(c=o+1e3)),t=o;for(let e in n){let{group:t,callback:r,data:c}=n[e];"function"==typeof r&&t.length&&r(t,o,c)}window.requestAnimationFrame(e)})),{animate:function(e,t,r=function(){},c={framerate:o}){Array.isArray(t)||(t=[t]),n[e]={name:e,group:t,callback:r,data:c}},stop:function(e){delete n[e]}}}};var SVG={new:function(e=[],t={},n=[]){let o=document.createElementNS("http://www.w3.org/2000/svg","svg");for(let t of e)o.appendChild(t);if(n&&n.length){let e,t,r=y1=0;switch(n.length){case 1:e=t=parseInt(n);break;case 2:[e,t]=n;break;case 4:[r,y1,e,t]=n}e&&t&&o.setAttribute("viewBox",`${r} ${y1} ${e} ${t}`)}return DOM.apply(o,t)},shape:function(e="rect",t={}){let n=document.createElementNS("http://www.w3.org/2000/svg",e);return DOM.apply(n,t)},group:function(e=[],t={}){let n=document.createElementNS("http://www.w3.org/2000/svg","g");for(let t of e)n.appendChild(t);return DOM.apply(n,t)}};if(DOM.components=!1,window.customElements){DOM.components=!0;class e extends HTMLElement{static observedAttributes=["type"];static#e={};static#t={};static#n="components";constructor(){super()}static set componentDir(t){e.#n=t}static bindData(t={}){e.#t=t}attributeChangedCallback(e,t,n){"type"===e&&this.fetchComponent(n).then(this.processComponent.bind(this))}fetchComponent(t){console.debug(`Requesting DOMComponent "${t}"`);const n=e.#e[t];if(n)return n.then?(console.debug(`Request already in flight for DOMComponent ${t}`),n):(console.debug(`Returning cached copy for DOMComponent ${t}`),new Promise(((e,t)=>e(n))));{const n=`${e.#n}/${t}`;console.debug(`Fetching DOMComponent ${t} from "${n}.html"`);const o=fetch(n+".html").then((e=>{if(!e.ok)throw new DOMException(`The requested DOMComponent is not found at ${HTMLTemplateURI}`);return e.text()})),r=Promise.all([o]).then((n=>(e.#e[t]=n[0],n)));return e.#e[t]=r,r}}processComponent(e){console.debug("Processing DOMComponent result:",e),this.innerHTML=e}}DOM.initComponents=function(t,n={}){return e.componentDir=t,window.customElements.define("dom-component",e),{}}}