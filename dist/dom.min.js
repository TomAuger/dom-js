var DOM={el:function(type="div",opts={}){let e=document.createElement(type);return DOM.apply(e,opts)},apply:function(el,atts={}){for(let att in atts)el.setAttribute(att,atts[att]);return el},empty:function(node){for(;node.childNodes.length;)node.firstChild.remove();return node},expand:function(template,vars){for(let[match,varName]of template.matchAll(/\{\{(.+?)\}\}/g))if(vars.hasOwnProperty(varName))for(;template.indexOf(match)>-1;)template=template.replace(match,vars[varName]);return template},debounce:function(callback,delayTime=300){let timerID;return()=>{timerID&&clearTimeout(timerID),timerID=setTimeout(callback,delayTime)}},Animator:function(_framerate=60){let lastTimestamp,animations={},framerate=_framerate,deltaSum=numFrames=0;const REPORT_MILLIS=1e3;let nextReportMillis=0;return window.requestAnimationFrame(function tick(timestamp){let delta;lastTimestamp&&(deltaSum+=delta=timestamp-lastTimestamp,numFrames++,timestamp>nextReportMillis&&(nextReportMillis=timestamp+REPORT_MILLIS)),lastTimestamp=timestamp;for(let name in animations){let{group:group,callback:callback,data:data}=animations[name];"function"==typeof callback&&group.length&&callback(group,timestamp,data)}window.requestAnimationFrame(tick)}),{animate:function(name,animationObject,animationCallback=function(){},animationData={framerate:framerate}){Array.isArray(animationObject)||(animationObject=[animationObject]),animations[name]={name:name,group:animationObject,callback:animationCallback,data:animationData}},stop:function(name){delete animations[name]}}}},SVG={new:function(shapes=[],opts={},viewBox=[]){let s=document.createElementNS("http://www.w3.org/2000/svg","svg");for(let el of shapes)s.appendChild(el);if(viewBox&&viewBox.length){let width,height,x1=y1=0;switch(viewBox.length){case 1:width=height=parseInt(viewBox);break;case 2:[width,height]=viewBox;break;case 4:[x1,y1,width,height]=viewBox}width&&height&&s.setAttribute("viewBox",`${x1} ${y1} ${width} ${height}`)}return DOM.apply(s,opts)},shape:function(type="rect",opts={}){let s=document.createElementNS("http://www.w3.org/2000/svg",type);return DOM.apply(s,opts)},group:function(shapes=[],opts={}){let g=document.createElementNS("http://www.w3.org/2000/svg","g");for(let el of shapes)g.appendChild(el);return DOM.apply(g,opts)}};